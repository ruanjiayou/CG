<!DOCTYPE html>
<html>

<head>
    <meta charset="utf-8" />
    <meta name="Author" content="阮家友" />
    <meta name="Keywords" content="HTML,model,test" />
    <meta name="Description" content="special effect model" />
    <meta name="time" content="2015-9-27 10:41:48" />
    <meta name="renderer" content="webkit" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=0, minimum-scale=1.0, maximum-scale=1.0"
    />
    <title>test</title>
    <script src="js/jquery.js"></script>
    <script src="js/Core.js"></script>
    <script src="scripts/CGraph.js"></script>
    <script src="scripts/CPoint.js"></script>
    <script src="scripts/CGraph.shape.js"></script>
    <link rel="stylesheet" href="./styles/common.css" />
</head>

<body>
    <canvas id="oc" width="600" height="600"></canvas>
    <button id="btn1">开始</button>
    <button id="btn2">停止</button>
    <script>
        var graph = new CGraph('oc');
        var img = new Image();
        img.src = 'images/yifei3.jpg';
        graph.load('images/yifei3.jpg', function () {
            var x = 0, y = 0, speed = { x: 2, y: 1 };
            this.run(function () {
                if (x > this.mWidth) {
                    speed.x = -2;
                }
                if (x < 0) {
                    speed.x = 2;
                }
                if (y > this.mHeight) {
                    speed.y = -1;
                }
                if (y < 0) {
                    speed.y = 1;
                }
                x += speed.x;
                y += speed.y;
                this.clear();
                this.mGC.save();
                this.mGC.beginPath();
                this.mGC.arc(x, y, 100, 0, Math.PI * 2, true);
                this.mGC.closePath();
                this.mGC.clip();
                this.mGC.drawImage(img, 0, 0);
                this.mGC.restore();
            });
        });
    </script>
</body>

</html>