<!DOCTYPE html>
<html>
<head>
	<meta charset="utf-8"/>
    <meta name="Author" content="阮家友"/>
    <meta name="Keywords" content="HTML,model,test"/>
    <meta name="Description" content="special effect model"/>
    <meta name="time" content="2015-9-27 10:41:48"/>
    <meta name="renderer" content="webkit"/>
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=0, minimum-scale=1.0, maximum-scale=1.0"/>
	<title>test</title>
    <link rel="stylesheet" href="css/reset.css"/>
    <script src="js/jquery.js"></script>
    <script src="js/Core.js"></script>
    <script src="js/DropImage.js"></script>
    <script src="js/CGraph.js"></script>
    <script src="js/CColor.js"></script>
    <script src="js/CGraph.grey.js"></script>
    <script src="js/CGraph.emboss.js"></script>
    <style>
        canvas { border: 1px solid #ccc; float: left; }
    </style>
</head>
<body>
    <div id="center">
        <div>把图片拖到这里来！</div>
        <canvas id="oc" width="400" height="300"></canvas>
    </div>
<script>
    var obj = new CCanvas("oc").proprety({
        "stokeStyle": "#666",
        "fillStyle": "#1f77b4",
        "font": "16px Arial",
        "textAlign": "center"
    });
    obj.load("images/yifei3.jpg",function(){
        //this.drawLine({"x1":10,"y1":10,"x2":100,"y2":100});
        this.each(this.grey).each(this.emboss);//.render();
        var onew = NewNode("canvas",{"width": this.mWidth, "height": this.mHeight });
        onew.getContext("2d").putImageData(this.mData,0,0);
        $('#center').append(onew);
    });
    DropImage({
        selector: "#center",
        callback: showPrevImg
    });
    
    function showPrevImg(src){
        var odiv1 = this;
        console.log(odiv1);
        odiv1.innerHTML = "<div>把图片拖到这里来！</div>";
        var obj = new CCanvas(NewNode("canvas")).proprety({
            "stokeStyle": "#666",
            "fillStyle": "#1f77b4",
            "font": "16px Arial",
            "textAlign": "center"
        });
        odiv1.appendChild(obj.mCanvas);
        obj.load(src,function(){
            //this.drawLine({"x1":10,"y1":10,"x2":100,"y2":100});
            this.each(this.grey).each(this.emboss);//.render();
            var onew = NewNode("canvas",{"width": this.mWidth, "height": this.mHeight });
            onew.getContext("2d").putImageData(this.mData,0,0);
            odiv1.appendChild(onew);
        });
    }
</script>
</body>
</html>
