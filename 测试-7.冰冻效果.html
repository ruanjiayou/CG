<!DOCTYPE html>
<html>

<head>
    <meta charset="utf-8" />
    <meta name="Author" content="阮家友" />
    <meta name="Keywords" content="HTML,model,test" />
    <meta name="Description" content="special effect model" />
    <meta name="time" content="2015-9-27 10:41:48" />
    <meta name="renderer" content="webkit" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=0, minimum-scale=1.0, maximum-scale=1.0"
    />
    <title>测试-7.冰冻效果</title>
    <script src="js/jquery.js"></script>
    <script src="js/Core.js"></script>
    <script src="js/DropImage.js"></script>
    <script src="scripts/CGraph.js"></script>
    <script src="scripts/CGraph.frozen.js"></script>
    <link rel="stylesheet" href="./styles/common.css" />
</head>

<body>
    <div class="info">把图片拖到这里来！</div>
    <script>
        // 右键删除
        Event.addEvent(document.body, 'contextmenu', function (evt) {
            let o = evt.target;
            if (o.nodeName.toLowerCase() === 'canvas') {
                o.parentNode.removeChild(o);
            }
        });
        // 拖拽效果
        DropImage({
            selector: ".info",
            callback: function (src) {
                new CGraph()
                    .appendTo()
                    .load(src, function () {
                        this
                            .clone()
                            .frozen()
                            .render()
                            .appendTo();
                    });
            }
        });
        // this is div#center
        function showPrevImg(src) {
            var graph = new CGraph();
            graph.setStrokeStyle('#666');
            graph.setFillStyle('#1f77b4');
            graph.load(src, function () {
                this.clone().frozen().render();
            });
        }
    </script>
</body>

</html>